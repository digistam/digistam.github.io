<html>
  <meta name=”robots” content=”noindex,nofollow”/>
<a href=index.html>Back to home</a>
<hr/>
<h1>Cloud Hacking</h1>
<h2>Container vulnerability scanning using Trivy</h2>  
<p>Container images consist of an operating system, application, runtime etc. packaged together. <a target=_blank href=https://github.com/aquasecurity/trivy>Trivy</a> is an automated tool used to 
  perform container image vulnerability scanning. </p>
  <h2>Kubernetes vulnerability scanning using Sysdig</h2>
  <p>Kubernetes is a complex environment that often suffers cluster misconfigurations. <a target=_blank href=https://sysdig.com>Sysdig</a> identifies Kubernetes vulnerabilities.</p>
  <h2>Enumerating S3 Buckets</h2>
<p>Attackers can exploit misconfigurations in bucket implementation and breach the security mechanism to compromise data privacy.</p>
  <p><ol>
    <ul>Inspecting HTML -> find URLs to target S3 buckets</ul>
    <ul>Brute-forcing URL -> each S3 bucket has a unique identification number, attackers perform brute-force attacks on the target bucket to identify the correct bucket URL; Burp suite</ul>
    <ul>Finding subdomains -> tools such as OWASP Amass and Robtex</ul>
    <ul>Reverse IP search -> advanced search operator ip:[TARGET IP ADDRESS] in Bing search engine</ul>
    <ul>Advanced Google Hacking -> inurl: s3.amazonaws.com</ul>
  </ol></p>
  <h2>Identifying Open S3 Buckets using S3Scanner</h2>
  <p>Attackers use <a target=_blank href=https://github.com/sa7mon/S3Scanner>S3Scanner</a> to identify open S3 buckets of cloud services and retrieve their content for malicious purposes.</p>
  <p><ol>
    <ul>s3scanner --threads 8 scan --buckets-file ./bucket-names.txt</ul>
    <ul>s3scanner dump --bucket my-bucket-to-dump</ul>
  </ol></p>
  <h2>Enumerating AWS Account IDs</h2>
  <p>AWS accounts are identified via unique IDs, which, when exposed in the public domain, can be leveraged by attackers to target cloud services. These unique IDs are meant to be private but 
  are often exposed to the public without the user's knowledge. Attackers enumerate AWS account IDs via:</p>
  <p><ol>
    <ul>AWS error messages</ul>
    <ul>Code repositories, such as Github</ul>
    <ul>Screenshots</ul>
    <ul>Databases</ul>
    <ul>Public elastic block store snapshots</ul>
    <ul>People posting personal IDs to seek online assistance/troubleshooting</ul>
  </ol></p>
  <p>After obtaining account IDs, attackers can perform various activities such as resource enumeration (discovering existing roles, users etc.), IAM role assumption, invocation of Lambda functions</p>
<h2>Enumerating IAM Roles</h2>
  <p>Attackers enumerate IAM role names by analyzing the AWS error messages, which reveal information regarding the existence of a user. Generally, in AWS cloud services, users are allowed to perform 
  numerous attempts to assume a role. For every failed attempt, AWS response messages reveal information about the existence of the role. If the AWS blocks an account after some failed attempts, implementing 
  a brute-force technique can be difficult but not impossible. By executing the process with a fragmented set of accounts or nodes, attackers can ultimately evade IP and account filtering solutions.</p>
  <p><ol>
    <ul>Internal software / stacks</ul>
    <ul>IAM user names (used for social engineering)</ul>
    <ul>AWS services in use</ul>
    <ul>3rd-party software in use </ul>
  </ol></p>
  <p>After enumerating the roles, attackers can try to assume an open role and steal its credentials. For example, if an attacker tries to assume a role that is not permitted, the AWS produces an error message. 
  By analyzing the error message, attackers can confirm the existence of the role but cannot assume it. By using any valid account ID and well-filtered wordlist, attackers can enumerate existing IAM roles.</p>

  <h2>Enumerating Bucket Permissions using S3Inspector</h2>
  <p>Attackers use <a target=_blank href=https://github.com/vpistis/s3-inspector>S3Inspector</a> to enumerate AWS S3 bucket permissions. By using this tool, attackers can verify whether a bucket is public or 
  non-public. In case of a public bucket, attackers can acquire the bucket permissions and a list of URLs to access it. Non-public buckets respond with access denied.</p>

  <h2>Enumerating Kubernetes etcd</h2>
  <p>Kubernetes is a distributed computing platform; therefore, it requires a distributed database, such as etcd. Gaining access to etcd is the same as obtaining root-level access to the system. In 
  Kubernetes, only the API server is allowed to access the etcd store. Attackers enumerate etcd processes, configuration files, open ports (identifying port 2379) etc. to identify endpoints connected 
  to the Kubernetes environment.</p>







  
</html>
